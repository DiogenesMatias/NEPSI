<!--Versao final de teste com marcadores finais-->

<!--Teste final 08/08/2023-->
<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
</head>
<body>
  <a-scene embedded arjs>
    <a-assets>
     
    <a-camera position="0 0 0" look-controls="enabled: false">
        <a-cursor></a-cursor>
    </a-camera>
  
    <!-- Primeiro Chaves Impacto Acerto-->
    <a-marker preset="pattern" type="pattern" value="1" url="./Targets/Padrao/pattern-impacto_ambiental_qr.patt">
       <a-box id="object1" position="0 0.5 0" width="2" height="1" depth="1" color="green" show-message-on-hover="message: Mensagem 1"></a-box>
       <a-text id="object1" value="Acertou!!!"
              position="0 1.25 0"
              color="white"
              align="center"
              scale="1.5 1.5 1.5" ></a-text>
    </a-marker>


    <!-- Terceiro Chaves Impacto Erro-->
    <a-marker preset="pattern" type="pattern" value="2" url="./Targets/Padrao/pattern-NEPSI-QR.patt">
      <!--<a-entity text="value: Errou!; color: red; scale: 2 2 2" id="object3">-->
      <a-box id="object3" position="0 0.5 0" width="2" height="1" depth="1" color="red" show-message-on-hover="message: Mensagem 2"></a-box>
      </a-box>
      <a-text id="object4" value="ERROU!!!"
              position="0 1.25 0"
              color="white"
              align="center"
              scale="1.5 1.5 1.5" ></a-text>
    </a-marker>

       <!-- Outros cartas -->
    <a-marker preset="pattern" type="pattern" value="3" url="./Targets/Padrao/pattern-aterro_sanitario_qr.patt">   
    </a-marker>

      <a-marker preset="pattern" type="pattern" value="4" url="./Targets/Padrao/pattern-desmatamento_qr.patt">   
    </a-marker>

      <a-marker preset="pattern" type="pattern" value="5" url="./Targets/Padrao/pattern-poluicao_no_mar_qr.patt">   
    </a-marker>

      <a-marker preset="pattern" type="pattern" value="6" url="./Targets/Padrao/pattern-poluicao_sonora.patt">   
    </a-marker>

      <a-marker preset="pattern" type="pattern" value="7" url="./Targets/Padrao/pattern-queimadas_qr.patt">   
    </a-marker>

    <!-- Definir o componente customizado "show-object3d-on-scan" -->
    <a-entity show-object3d-on-scan></a-entity>
  </a-scene>

  <script>

    // Definir o componente customizado "show-object3d-on-scan"
    AFRAME.registerComponent('show-object3d-on-scan', {
      init: function () {
        const markerEntity = this.el;
        markerEntity.addEventListener('markerFound', function (event) {
          const markerId = event.target.getAttribute('value');
          // Ocultar todos os modelos 3D
          document.querySelectorAll('a-entity').forEach(model => model.setAttribute('visible', false));
          
          // Mostrar objeto 3D associado ao marcador encontrado
          switch (markerId) {
            case '1','3','4','5','6','7':
                if(markerId == '1' && markerId == '3' || markerId == '1' && markerId == '4' 
                || markerId == '1' && markerId == '5' || markerId == '1' && markerId == '6'
                || markerId == '1' && markerId == '7' ){
              document.getElementById('object1').setAttribute('visible', true);
              document.getElementById('object1').setAttribute('visible', true);
              
                }
                break;
          
            case '2':
                if(markerId == '2' && markerId == '3' || markerId == '2' && markerId == '4' 
                    || markerId == '2' && markerId == '5' || markerId == '2' && markerId == '6'
                    || markerId == '2' && markerId == '7' ){
                        document.getElementById('object3').setAttribute('visible', true);
                        document.getElementById('object4').setAttribute('visible', true);
                 }
                break;
            default:
                    document.getElementById('object3').setAttribute('visible', true);
                    document.getElementById('object4').setAttribute('visible', true); 
                break;
          }
        });
      }
    });

</script>
</body>
</html>
